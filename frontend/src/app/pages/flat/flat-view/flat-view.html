@if(flat) {
<div class="flat-container">
    <!-- Header -->
    <div class="flat-header">
        <p class="address">{{ flat.stNum }} {{ flat.stName }}, {{ flat.city }}</p>
        <div class="icon-group">
            <i *ngIf="currentUser"
                class="material-icons flat-fav"
                [style.color]="currentUser?.favorites?.includes(flat._id) ? 'gold' : 'gray'"
                (click)="toggleFavorite($event)">
                {{ currentUser?.favorites?.includes(flat._id) ? 'star' : 'star_outline' }}
            </i>
            <i *ngIf="flat.owner?._id === currentUser?._id"
                class="material-icons"
                (click)="goToEdit()">
                edit
            </i>
        </div>
    </div>

    <!-- Main Info -->
    <div class="flat-detail">
        <!-- Flat Info -->
        <div class="flat-info-list">
            <div class="flat-info">
                <div class="icon"><i class="material-icons">attach_money</i></div>
                <div class="form-row">
                    <div class="label">price</div>
                    <div class="value">{{ flat.price | currency:'CAD':'symbol':'1.0-0' }}</div>
                </div>
            </div>

            <div class="flat-info">
                <div class="icon"><i class="material-icons">square_foot</i></div>
                <div class="right">
                    <div class="label">size</div>
                    <div class="value">{{ flat.size }}</div>
                </div>
            </div>

            <div class="flat-info">
                <div class="icon"><i class="material-icons">thermostat</i></div>
                <div class="right">
                    <div class="label">hasAC</div>
                    <div class="value">{{ flat.hasAC ? 'Yes' : 'No' }}</div>
                </div>
            </div>

            <div class="flat-info">
                <div class="icon"><i class="material-icons">apartment</i></div>
                <div class="right">
                    <div class="label">Built In</div>
                    <div class="value">{{ flat.year }}</div>
                </div>
            </div>

            <div class="flat-info">
                <div class="icon"><i class="material-icons">today</i></div>
                <div class="right">
                    <div class="label">Date Available</div>
                    <div class="value">{{ flat.availDate | date:'yyyy/MM/dd' }}</div>
                </div>
            </div>
        </div>

        <!-- Contact -->
        <div class="owner-section">
            <div class="owner-info">
                <h3>Owner Information</h3>
                <p><strong>Email:</strong> {{ flat.owner.email }}</p>
            </div>

            <div class="message-box">
                <h3>Send a Message</h3>
                <textarea placeholder="Write your message..."></textarea>
                <button type="button">Send</button>
            </div>
        </div>
    </div>
</div>
}